# CLI ä½¿ç”¨ç¤ºä¾‹

## åŸºç¡€ä½¿ç”¨æµç¨‹

### 1. çŽ¯å¢ƒå‡†å¤‡

é¦–å…ˆç¡®ä¿é…ç½®äº†å¿…è¦çš„çŽ¯å¢ƒå˜é‡ï¼š

```bash
# åˆ›å»º .env æ–‡ä»¶
cat > .env << EOF
ZOTERO_DB_PATH=~/Zotero/zotero.sqlite
ZOTERO_DATA_DIR=~/Zotero/storage
MINERU_API_URL=https://mineru.net/api/v4
MINERU_TOKEN=your_mineru_token_here
AI_API_KEY=your_ai_api_key_here
AI_BASE_URL=https://open.bigmodel.cn/api/coding/paas/v4
AI_MODEL=glm-4.6
EOF

# æž„å»ºé¡¹ç›®
cd server/
make build
```

### 2. åŸºç¡€æ–‡çŒ®ç®¡ç†

#### åˆ—å‡ºæ‰€æœ‰æ–‡çŒ®

```bash
./bin/zoteroflow2 list
```

**é¢„æœŸè¾“å‡º**:
```
æ‰¾åˆ° 5 ä¸ªè§£æžç»“æžœ:

[1] æœºå™¨å­¦ä¹ åŸºç¡€_20241201
     æ ‡é¢˜: æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹
     ä½œè€…: å¼ ä¸‰; æŽå››
     å¤§å°: 2.3 MB
     æ—¥æœŸ: 2024-12-01

[2] æ·±åº¦å­¦ä¹ ç ”ç©¶_20241130
     æ ‡é¢˜: æ·±åº¦å­¦ä¹ åœ¨åŒ»ç–—è¯Šæ–­ä¸­çš„åº”ç”¨
     ä½œè€…: çŽ‹äº”; èµµå…­
     å¤§å°: 1.8 MB
     æ—¥æœŸ: 2024-11-30
```

#### æœç´¢ç‰¹å®šä¸»é¢˜æ–‡çŒ®

```bash
# æœç´¢æœºå™¨å­¦ä¹ ç›¸å…³æ–‡çŒ®
./bin/zoteroflow2 search "æœºå™¨å­¦ä¹ "

# æœç´¢æ·±åº¦å­¦ä¹ ç›¸å…³æ–‡çŒ®
./bin/zoteroflow2 search "æ·±åº¦å­¦ä¹ "

# æœç´¢ç‰¹å®šä½œè€…
./bin/zoteroflow2 search "å¼ ä¸‰"
```

#### é€šè¿‡DOIæŸ¥æ‰¾æ–‡çŒ®

```bash
./bin/zoteroflow2 doi "10.1234/ml.2024.001"
```

**é¢„æœŸè¾“å‡º**:
```
ðŸ“„ æ‰¾åˆ° 1 ç¯‡æ–‡çŒ®:
  1. æ ‡é¢˜: æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹ (è¯„åˆ†: 95.0)
     ä½œè€…: å¼ ä¸‰; æŽå››
     æœŸåˆŠ: è®¡ç®—æœºç§‘å­¦
     å¹´ä»½: 2024
     DOI: 10.1234/ml.2024.001
     PDFè·¯å¾„: /home/user/Zotero/storage/ABC123/æœºå™¨å­¦ä¹ åŸºç¡€.pdf

ðŸš€ å¼€å§‹è§£æžPDF...
[2024-12-01 10:30:15] æ­¥éª¤1: æäº¤æ‰¹é‡ä»»åŠ¡
[2024-12-01 10:30:16] ä»»åŠ¡ID: task_123456, ä¸Šä¼ URL: https://mineru.net/upload/...
[2024-12-01 10:30:20] æ­¥éª¤2: ä¸Šä¼ PDFæ–‡ä»¶
[2024-12-01 10:30:25] æ­¥éª¤3: è½®è¯¢å¤„ç†çŠ¶æ€
[2024-12-01 10:31:30] æ­¥éª¤4: ä¸‹è½½è§£æžç»“æžœ
âœ… PDFè§£æžæˆåŠŸ! è€—æ—¶: 1åˆ†15ç§’

ðŸ“Š è§£æžç»“æžœ:
  ä»»åŠ¡ID: task_123456
  å¤„ç†è€—æ—¶: 75000 ms
  ZIPæ–‡ä»¶: data/results/æœºå™¨å­¦ä¹ åŸºç¡€_20241201/raw.zip

ðŸ“ æ–‡ä»¶å·²è‡ªåŠ¨ç»„ç»‡åˆ°: data/results/
ä½¿ç”¨ './bin/zoteroflow2 list' æŸ¥çœ‹æ‰€æœ‰ç»“æžœ
```

### 3. æŸ¥çœ‹è§£æžç»“æžœ

#### æ‰“å¼€æ–‡çŒ®æ–‡ä»¶å¤¹

```bash
# æ‰“å¼€æœ€æ–°çš„è§£æžç»“æžœ
./bin/zoteroflow2 open "æœºå™¨å­¦ä¹ åŸºç¡€"

# æˆ–è€…ä½¿ç”¨å®Œæ•´æ–‡ä»¶å¤¹å
./bin/zoteroflow2 open "æœºå™¨å­¦ä¹ åŸºç¡€_20241201"
```

**é¢„æœŸè¾“å‡º**:
```
æ‰“å¼€æ–‡çŒ®æ–‡ä»¶å¤¹: data/results/æœºå™¨å­¦ä¹ åŸºç¡€_20241201
æ–‡ä»¶å†…å®¹:
  ðŸ“ images/ (12 ä¸ªæ–‡ä»¶)
  ðŸ“„ full.md (45.2 KB)
  ðŸ“„ meta.json (1.2 KB)
  ðŸ“„ raw.zip (2.3 MB)
  ðŸ“„ source.pdf (2.1 MB)
```

#### æŸ¥çœ‹è§£æžçš„Markdownå†…å®¹

```bash
# æŸ¥çœ‹è§£æžåŽçš„markdownæ–‡ä»¶
cat data/results/æœºå™¨å­¦ä¹ åŸºç¡€_20241201/full.md | head -20
```

**é¢„æœŸè¾“å‡º**:
```
# æœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹

## æ‘˜è¦
æœ¬æ–‡ä»‹ç»äº†æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µã€ä¸»è¦ç®—æ³•å’Œåº”ç”¨åœºæ™¯...

## 1. å¼•è¨€
æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œå®ƒä½¿è®¡ç®—æœºèƒ½å¤Ÿä»Žæ•°æ®ä¸­å­¦ä¹ ...

## 2. åŸºæœ¬æ¦‚å¿µ

### 2.1 ç›‘ç£å­¦ä¹ 
ç›‘ç£å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ç§ä¸»è¦æ–¹æ³•...
```

## AI å¯¹è¯ç¤ºä¾‹

### 1. åŸºç¡€AIé—®ç­”

#### å•æ¬¡é—®ç­”

```bash
./bin/zoteroflow2 chat "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ"
```

**é¢„æœŸè¾“å‡º**:
```
ðŸ¤– æ­£åœ¨å‘AIå‘é€é—®é¢˜: ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä½¿è®¡ç®—æœºèƒ½å¤Ÿä»Žæ•°æ®ä¸­å­¦ä¹ æ¨¡å¼å’Œè§„å¾‹ï¼Œè€Œæ— éœ€æ˜Žç¡®ç¼–ç¨‹ã€‚ä¸»è¦åŒ…æ‹¬ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ç­‰æ–¹æ³•ã€‚

ðŸ“Š Tokenä½¿ç”¨: 45 (è¾“å…¥) + 128 (è¾“å‡º) = 173 (æ€»è®¡)
```

#### äº¤äº’å¼å¯¹è¯

```bash
./bin/zoteroflow2 chat
```

**å¯¹è¯ç¤ºä¾‹**:
```
ðŸ¤– ZoteroFlow2 AIå­¦æœ¯åŠ©æ‰‹
è¾“å…¥ 'help' æŸ¥çœ‹å¸®åŠ©ï¼Œè¾“å…¥ 'quit' æˆ– 'exit' é€€å‡º
--------------------------------------------------
ðŸ“š æ‚¨: ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä½¿ç”¨å¤šå±‚ç¥žç»ç½‘ç»œæ¥å­¦ä¹ æ•°æ®çš„å¤æ‚æ¨¡å¼ã€‚ä¸Žä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•ç›¸æ¯”ï¼Œæ·±åº¦å­¦ä¹ èƒ½å¤Ÿè‡ªåŠ¨æå–ç‰¹å¾ï¼Œåœ¨å¤§æ•°æ®çŽ¯å¢ƒä¸‹è¡¨çŽ°ä¼˜å¼‚ã€‚

ðŸ“š æ‚¨: æ·±åº¦å­¦ä¹ å’Œä¼ ç»Ÿæœºå™¨å­¦ä¹ æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: ä¸»è¦åŒºåˆ«åŒ…æ‹¬ï¼š
1. ç‰¹å¾å·¥ç¨‹ï¼šä¼ ç»ŸMLéœ€è¦æ‰‹åŠ¨è®¾è®¡ç‰¹å¾ï¼ŒDLè‡ªåŠ¨å­¦ä¹ ç‰¹å¾
2. æ•°æ®éœ€æ±‚ï¼šDLé€šå¸¸éœ€è¦æ›´å¤šæ•°æ®
3. è®¡ç®—èµ„æºï¼šDLéœ€è¦æ›´å¼ºçš„è®¡ç®—èƒ½åŠ›
4. å¯è§£é‡Šæ€§ï¼šä¼ ç»ŸMLé€šå¸¸æ›´æ˜“è§£é‡Š

ðŸ“š æ‚¨: èƒ½æŽ¨èä¸€äº›æ·±åº¦å­¦ä¹ çš„å…¥é—¨èµ„æºå—ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: å½“ç„¶å¯ä»¥ï¼ä»¥ä¸‹æ˜¯ä¸€äº›ä¼˜è´¨çš„æ·±åº¦å­¦ä¹ å…¥é—¨èµ„æºï¼š
1. ã€Šæ·±åº¦å­¦ä¹ ã€‹- Ian Goodfellow ç­‰
2. Coursera ä¸Šçš„ "Deep Learning Specialization"
3. fast.ai çš„å®žç”¨æ·±åº¦å­¦ä¹ è¯¾ç¨‹
4. TensorFlow å’Œ PyTorch å®˜æ–¹æ•™ç¨‹

ðŸ“š æ‚¨: quit
ðŸ‘‹ å†è§!
```

### 2. åŸºäºŽæ–‡çŒ®çš„AIå¯¹è¯

#### åŸºäºŽç‰¹å®šæ–‡çŒ®æé—®

```bash
# åŸºäºŽæœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹æé—®
./bin/zoteroflow2 chat --doc="æœºå™¨å­¦ä¹ åŸºç¡€" "è¿™ç¯‡æ–‡ç« çš„ä¸»è¦è§‚ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"

# åŸºäºŽæ·±åº¦å­¦ä¹ ç ”ç©¶æé—®
./bin/zoteroflow2 chat --doc="æ·±åº¦å­¦ä¹ ç ”ç©¶" "è¿™ç¯‡æ–‡ç« ä½¿ç”¨äº†ä»€ä¹ˆæ–¹æ³•ï¼Ÿ"
```

**é¢„æœŸè¾“å‡º**:
```
ðŸ“š åŸºäºŽæ–‡çŒ® 'æœºå™¨å­¦ä¹ åŸºç¡€_20241201' è¿›è¡Œå¯¹è¯
ðŸ“ ä½œè€…: å¼ ä¸‰; æŽå››
ðŸ“„ æ‘˜è¦: æœ¬æ–‡ä»‹ç»äº†æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µã€ä¸»è¦ç®—æ³•å’Œåº”ç”¨åœºæ™¯...
--------------------------------------------------
ðŸ¤– åŠ©æ‰‹: åŸºäºŽã€Šæœºå™¨å­¦ä¹ åŸºç¡€æ•™ç¨‹ã€‹è¿™ç¯‡æ–‡ç« ï¼Œä¸»è¦è§‚ç‚¹åŒ…æ‹¬ï¼š

1. **æœºå™¨å­¦ä¹ çš„å®šä¹‰å’Œé‡è¦æ€§**ï¼šæ–‡ç« å¼ºè°ƒäº†æœºå™¨å­¦ä¹ åœ¨çŽ°ä»£äººå·¥æ™ºèƒ½ä¸­çš„æ ¸å¿ƒåœ°ä½ï¼Œä»¥åŠå®ƒå¦‚ä½•æ”¹å˜æ•°æ®å¤„ç†å’Œå†³ç­–åˆ¶å®šçš„æ–¹å¼ã€‚

2. **ä¸‰å¤§ä¸»è¦æ–¹æ³•**ï¼š
   - ç›‘ç£å­¦ä¹ ï¼šä½¿ç”¨æ ‡è®°æ•°æ®è¿›è¡Œé¢„æµ‹
   - æ— ç›‘ç£å­¦ä¹ ï¼šå‘çŽ°æ•°æ®ä¸­çš„éšè—æ¨¡å¼
   - å¼ºåŒ–å­¦ä¹ ï¼šé€šè¿‡è¯•é”™å­¦ä¹ æœ€ä¼˜ç­–ç•¥

3. **å®žé™…åº”ç”¨åœºæ™¯**ï¼šæ–‡ç« è¯¦ç»†ä»‹ç»äº†æœºå™¨å­¦ä¹ åœ¨åŒ»ç–—ã€é‡‘èžã€äº¤é€šç­‰é¢†åŸŸçš„å…·ä½“åº”ç”¨æ¡ˆä¾‹ã€‚

4. **æœªæ¥å‘å±•è¶‹åŠ¿**ï¼šä½œè€…è®¨è®ºäº†æ·±åº¦å­¦ä¹ ã€è”é‚¦å­¦ä¹ ç­‰å‰æ²¿æŠ€æœ¯çš„å‘å±•æ–¹å‘ã€‚

ðŸ“Š Tokenä½¿ç”¨: 156 (è¾“å…¥) + 234 (è¾“å‡º) = 390 (æ€»è®¡)
```

#### è¿žç»­å¯¹è¯

```bash
./bin/zoteroflow2 chat --doc="æœºå™¨å­¦ä¹ åŸºç¡€"
```

**å¯¹è¯ç¤ºä¾‹**:
```
ðŸ“š åŸºäºŽæ–‡çŒ® 'æœºå™¨å­¦ä¹ åŸºç¡€_20241201' è¿›è¡Œå¯¹è¯
ðŸ“ ä½œè€…: å¼ ä¸‰; æŽå››
ðŸ“„ æ‘˜è¦: æœ¬æ–‡ä»‹ç»äº†æœºå™¨å­¦ä¹ çš„åŸºæœ¬æ¦‚å¿µ...
--------------------------------------------------
ðŸ“š æ‚¨: è¿™ç¯‡æ–‡ç« æåˆ°äº†å“ªäº›ç®—æ³•ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: æ ¹æ®æ–‡ç« å†…å®¹ï¼Œä¸»è¦æåˆ°äº†ä»¥ä¸‹ç®—æ³•ï¼š
1. çº¿æ€§å›žå½’
2. å†³ç­–æ ‘
3. æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰
4. ç¥žç»ç½‘ç»œ
5. K-meansèšç±»

ðŸ“š æ‚¨: èƒ½è¯¦ç»†è§£é‡Šä¸€ä¸‹æ”¯æŒå‘é‡æœºå—ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: åŸºäºŽæ–‡ç« ç¬¬ä¸‰ç« çš„å†…å®¹ï¼Œæ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰æ˜¯ä¸€ç§ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š
- å¯»æ‰¾æœ€ä¼˜åˆ†ç¦»è¶…å¹³é¢
- ä½¿ç”¨æ ¸æŠ€å·§å¤„ç†éžçº¿æ€§é—®é¢˜
- åœ¨å°æ ·æœ¬æƒ…å†µä¸‹è¡¨çŽ°è‰¯å¥½
- å…·æœ‰è¾ƒå¥½çš„æ³›åŒ–èƒ½åŠ›

ðŸ“š æ‚¨: è¿™äº›ç®—æ³•æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿ
ðŸ¤– åŠ©æ‰‹: æ ¹æ®æ–‡ç« ç¬¬å››ç« çš„æ¯”è¾ƒåˆ†æžï¼š
- çº¿æ€§å›žå½’ï¼šç®€å•æ˜“æ‡‚ï¼Œä½†åªèƒ½å¤„ç†çº¿æ€§å…³ç³»
- å†³ç­–æ ‘ï¼šå¯è§£é‡Šæ€§å¼ºï¼Œä½†å®¹æ˜“è¿‡æ‹Ÿåˆ
- SVMï¼šåœ¨é«˜ç»´ç©ºé—´è¡¨çŽ°å¥½ï¼Œä½†è®¡ç®—å¤æ‚åº¦é«˜
- ç¥žç»ç½‘ç»œï¼šæ‹Ÿåˆèƒ½åŠ›å¼ºï¼Œä½†éœ€è¦å¤§é‡æ•°æ®å’Œè®¡ç®—èµ„æº
- K-meansï¼šç®€å•å¿«é€Ÿï¼Œä½†éœ€è¦é¢„å…ˆæŒ‡å®šèšç±»æ•°é‡
```

## é«˜çº§ä½¿ç”¨åœºæ™¯

### 1. æ‰¹é‡å¤„ç†æ–‡çŒ®

```bash
# æœç´¢å¹¶æ‰¹é‡è§£æžå¤šç¯‡æ–‡çŒ®
./bin/zoteroflow2 search "æœºå™¨å­¦ä¹ " | head -5

# ç„¶åŽé€ä¸ªè§£æž
./bin/zoteroflow2 doi "10.1234/ml.2024.001"
./bin/zoteroflow2 doi "10.5678/dl.2023.002"
./bin/zoteroflow2 doi "10.9012/ai.2023.003"
```

### 2. ç ”ç©¶ä¸»é¢˜åˆ†æž

```bash
# æœç´¢ç‰¹å®šä¸»é¢˜
./bin/zoteroflow2 search "æ·±åº¦å­¦ä¹ "

# åŸºäºŽæœç´¢ç»“æžœè¿›è¡ŒAIåˆ†æž
./bin/zoteroflow2 chat "åŸºäºŽæˆ‘åº“ä¸­çš„æ·±åº¦å­¦ä¹ æ–‡çŒ®ï¼Œæ€»ç»“ä¸€ä¸‹è¿™ä¸ªé¢†åŸŸçš„ä¸»è¦ç ”ç©¶æ–¹å‘"
```

### 3. æ–‡çŒ®ç»¼è¿°è¾…åŠ©

```bash
# æœç´¢ç›¸å…³æ–‡çŒ®
./bin/zoteroflow2 search "æœºå™¨å­¦ä¹  åŒ»ç–—"

# åŸºäºŽæ–‡çŒ®è¿›è¡Œç»¼è¿°åˆ†æž
./bin/zoteroflow2 chat --doc="æœºå™¨å­¦ä¹ åŒ»ç–—" "è¿™ç¯‡æ–‡ç« åœ¨åŒ»ç–—é¢†åŸŸçš„åº”ç”¨æœ‰å“ªäº›åˆ›æ–°ç‚¹ï¼Ÿ"

# ç»¼åˆåˆ†æž
./bin/zoteroflow2 chat "è¯·å¸®æˆ‘åˆ†æžæœºå™¨å­¦ä¹ åœ¨åŒ»ç–—è¯Šæ–­ä¸­çš„åº”ç”¨çŽ°çŠ¶å’Œå‘å±•è¶‹åŠ¿"
```

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. é…ç½®é—®é¢˜

```bash
# æ£€æŸ¥é…ç½®
./bin/zoteroflow2

# å¦‚æžœå‡ºçŽ°é…ç½®é”™è¯¯ï¼Œæ£€æŸ¥ .env æ–‡ä»¶
cat .env
```

#### 2. æ•°æ®åº“è¿žæŽ¥é—®é¢˜

```bash
# æ£€æŸ¥Zoteroæ•°æ®åº“è·¯å¾„
ls -la ~/Zotero/zotero.sqlite

# æ£€æŸ¥å­˜å‚¨ç›®å½•
ls -la ~/Zotero/storage
```

#### 3. MinerU APIé—®é¢˜

```bash
# æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
curl -I https://mineru.net/api/v4

# éªŒè¯token
curl -H "Authorization: Bearer your_token" https://mineru.net/api/v4/file-urls/batch
```

#### 4. AIæœåŠ¡é—®é¢˜

```bash
# æ£€æŸ¥AI APIè¿žæŽ¥
curl -H "Authorization: Bearer your_ai_key" \
     -H "Content-Type: application/json" \
     -d '{"model":"glm-4.6","messages":[{"role":"user","content":"test"}]}' \
     https://open.bigmodel.cn/api/coding/paas/v4/chat/completions
```

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç¼“å­˜ç®¡ç†

```bash
# æ¸…ç†ç¼“å­˜
./bin/zoteroflow2 clean

# æŸ¥çœ‹ç¼“å­˜å¤§å°
du -sh ~/.zoteroflow/cache/
```

### 2. å¹¶å‘å¤„ç†

```bash
# ä½¿ç”¨å¹¶è¡Œå¤„ç†æé«˜æ•ˆçŽ‡
for doi in $(cat doi_list.txt); do
    ./bin/zoteroflow2 doi "$doi" &
done
wait
```

### 3. ç›‘æŽ§å’Œæ—¥å¿—

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export LOG_LEVEL=debug
./bin/zoteroflow2 list

# æŸ¥çœ‹è§£æžè®°å½•
ls -la data/records/
cat data/records/mineru_parse_records_$(date +%Y-%m-%d).csv